#flashcards
Data: 2023-08-07 12:58
Title: [[ThreadLocal]]
Alias:
Header:

Что такое [[ThreadLocal]]?::[[ThreadLocal]] – это класс, позволяющий имея одну переменную, иметь различное её значение для каждого из потоков.
<!--SR:!2023-10-27,1,130-->



Body:



Какие есть особенности у `ThreadLocal`?
!---
Ответ:
	- У каждого потока - т.е. экземпляра класса `Thread` - есть ассоциированная с ним таблица _ThreadLocal-переменных_. Ключами таблицы являются cсылки на объекты класса `ThreadLocal`, а значениями - ссылки на объекты, «захваченные» ThreadLocal-переменными.
	- То есть, ThreadLocal-переменные отличаются от обычных переменных тем, что у каждого потока свой собственный, индивидуально инициализируемый экземпляр переменной.
	- Доступ к значению можно получить через методы `get()` или `set()`.
<!--SR:!2023-10-27,3,150-->


Что изолирует `ThreadLocal`?
!---
Ответ:
	- `ThreadLocal` изолирует именно ссылки на объекты, а не сами объекты.
	- Если изолированные внутри потоков ссылки ведут на один и тот же объект, то возможны коллизии.
	- Так как ThreadLocal-переменные изолированы в потоках, то инициализация такой переменной должна происходить в том же потоке, в котором она будет использоваться. 
	- Ошибкой является инициализация такой переменной (вызов метода `set()`) в главном потоке приложения, потому как в данном случае значение, переданное в методе `set()`, будет «захвачено» для главного потока, и при вызове метода `get()` в целевом потоке будет возвращен `null`.
<!--SR:!2023-10-27,1,130-->



Главы:
-


Sources:
- [ ] [Вопросы для собеседования на Java Developer](https://github.com/enhorse/java-interview/blob/master/README.md#%D0%9E%D0%9E%D0%9F)
- [ ] []()
- [ ] []()
